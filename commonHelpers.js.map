{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\n\nconst KEY = '42676528-15736482ad411b0a23089de5b';\naxios.defaults.baseURL = 'https://pixabay.com/';\n\n\nexport async function getImages(query,pageNumber) {\n    return await axios.get('api/', {\n        params: {\n            key: KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: pageNumber,\n            per_page: '15',\n        }\n    })\n        .then(response => {\n            if (response.data.total === 0) {\n                iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                });\n            }\n            return response.data;\n        })\n        .catch (error => console.log(error))\n}","export function render(images) {\n    const markup = images\n        .map(image => `\n            <li class=\"images-list-item\">\n                <a class=\"item-link\" href=\"${image.largeImageURL}\">\n                    <img \n                        class=\"item-image\" \n                        src=\"${image.webformatURL}\" \n                        alt=\"${image.tags}\" \n                        />\n                    <div class=\"item-image-info\">\n                        <p class=\"info-title\">Likes <span class=\"info-data\">${image.likes}</span></p>\n                        <p class=\"info-title\">Views <span class=\"info-data\">${image.views}</span></p>\n                        <p class=\"info-title\">Comments <span class=\"info-data\">${image.comments}</span></p>\n                        <p class=\"info-title\">Downloads <span class=\"info-data\">${image.downloads}</span></p>\n                    </div>\n                </a>\n            </li>`)\n        .join(\"\");\n    return markup;   \n}\n\n","import { getImages } from './js/pixabay-api.js';\nimport { render } from './js/render-functions.js'\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst imagesList = document.querySelector(\".images-list\");\nconst searchButton = document.querySelector('.search-button');\nconst searchBar = document.querySelector('.search-settings');\nconst loading = document.querySelector('.loading-text');\nconst loadMoreButton = document.querySelector('.load-more-button');\nlet pageNumber = 1;\nlet searchOption = '';\n\nconst lightbox =\n                new SimpleLightbox('.images-list a', {\n                nav: true,\n                captions: true,\n                captionsData: 'alt',\n                captionDelay: 200,\n                })\n\nsearchButton.addEventListener('click', search);\nloadMoreButton.addEventListener('click', loadMore);\n\nasync function search(event) {\n    event.preventDefault();\n    loading.classList.toggle('visually-hidden');\n    pageNumber = 1;\n    const query = searchBar.value.trim();\n    searchOption = query;\n    await getImages(query, pageNumber)\n        .then(images => {\n            loading.classList.toggle('visually-hidden');\n            if (images.totalHits === 0) {return}\n            imagesList.innerHTML = '';\n            imagesList.insertAdjacentHTML(\"beforeend\", render(images.hits));\n            lightbox.refresh();\n\n            if (loadMoreButton.classList.contains('visually-hidden')) {\n                loadMoreButton.classList.toggle('visually-hidden');\n            }\n            limitCheck(images);\n        })\n        .catch (error => {\n        console.log(error);\n        });\n    searchBar.value = '';\n}\n\nasync function loadMore() {\n    pageNumber += 1;\n    loading.classList.toggle('visually-hidden');\n    await getImages(searchOption, pageNumber)\n        .then(images => {\n            loading.classList.toggle('visually-hidden');\n            imagesList.insertAdjacentHTML(\"beforeend\", render(images.hits));\n            lightbox.refresh();\n            limitCheck(images);\n            scroll()\n        })\n        .catch (error => {\n            console.log(error);\n        });\n}\n\nasync function scroll() {\n    const galleryItem = document.querySelector('.images-list-item');\n    window.scrollBy({ top: galleryItem.getBoundingClientRect().height * 2, behavior: 'smooth' });\n}\n\nasync function limitCheck(images) {\n    if (images.totalHits < pageNumber * 15 && images.totalHits !== 0) {\n        iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreButton.classList.toggle('visually-hidden');\n        } \n}"],"names":["KEY","axios","getImages","query","pageNumber","response","iziToast","error","render","images","image","imagesList","searchButton","searchBar","loading","loadMoreButton","searchOption","lightbox","SimpleLightbox","search","loadMore","event","limitCheck","scroll","galleryItem"],"mappings":"owBAKA,MAAMA,EAAM,qCACZC,EAAM,SAAS,QAAU,uBAGlB,eAAeC,EAAUC,EAAMC,EAAY,CAC9C,OAAO,MAAMH,EAAM,IAAI,OAAQ,CAC3B,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,IACb,CACT,CAAK,EACI,KAAKC,IACEA,EAAS,KAAK,QAAU,GACxBC,EAAS,MAAM,CACf,QAAS,0EACzB,CAAiB,EAEED,EAAS,KACnB,EACA,MAAOE,GAAS,QAAQ,IAAIA,CAAK,CAAC,CAC3C,CC9BO,SAASC,EAAOC,EAAQ,CAmB3B,OAlBeA,EACV,IAAIC,GAAS;AAAA;AAAA,6CAEuBA,EAAM,aAAa;AAAA;AAAA;AAAA,+BAGjCA,EAAM,YAAY;AAAA,+BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,8EAGqCA,EAAM,KAAK;AAAA,8EACXA,EAAM,KAAK;AAAA,iFACRA,EAAM,QAAQ;AAAA,kFACbA,EAAM,SAAS;AAAA;AAAA;AAAA,kBAG/E,EACT,KAAK,EAAE,CAEhB,CCZA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAiB,SAAS,cAAc,mBAAmB,EACjE,IAAIX,EAAa,EACbY,EAAe,GAEnB,MAAMC,EACU,IAAIC,EAAe,iBAAkB,CACrC,IAAK,GACL,SAAU,GACV,aAAc,MACd,aAAc,GAC9B,CAAiB,EAEjBN,EAAa,iBAAiB,QAASO,CAAM,EAC7CJ,EAAe,iBAAiB,QAASK,CAAQ,EAEjD,eAAeD,EAAOE,EAAO,CACzBA,EAAM,eAAc,EACpBP,EAAQ,UAAU,OAAO,iBAAiB,EAC1CV,EAAa,EACb,MAAMD,EAAQU,EAAU,MAAM,KAAI,EAClCG,EAAeb,EACf,MAAMD,EAAUC,EAAOC,CAAU,EAC5B,KAAKK,GAAU,CACZK,EAAQ,UAAU,OAAO,iBAAiB,EACtCL,EAAO,YAAc,IACzBE,EAAW,UAAY,GACvBA,EAAW,mBAAmB,YAAaH,EAAOC,EAAO,IAAI,CAAC,EAC9DQ,EAAS,QAAO,EAEZF,EAAe,UAAU,SAAS,iBAAiB,GACnDA,EAAe,UAAU,OAAO,iBAAiB,EAErDO,EAAWb,CAAM,EAC7B,CAAS,EACA,MAAOF,GAAS,CACjB,QAAQ,IAAIA,CAAK,CACzB,CAAS,EACLM,EAAU,MAAQ,EACtB,CAEA,eAAeO,GAAW,CACtBhB,GAAc,EACdU,EAAQ,UAAU,OAAO,iBAAiB,EAC1C,MAAMZ,EAAUc,EAAcZ,CAAU,EACnC,KAAKK,GAAU,CACZK,EAAQ,UAAU,OAAO,iBAAiB,EAC1CH,EAAW,mBAAmB,YAAaH,EAAOC,EAAO,IAAI,CAAC,EAC9DQ,EAAS,QAAO,EAChBK,EAAWb,CAAM,EACjBc,EAAQ,CACpB,CAAS,EACA,MAAOhB,GAAS,CACb,QAAQ,IAAIA,CAAK,CAC7B,CAAS,CACT,CAEA,eAAegB,GAAS,CACpB,MAAMC,EAAc,SAAS,cAAc,mBAAmB,EAC9D,OAAO,SAAS,CAAE,IAAKA,EAAY,wBAAwB,OAAS,EAAG,SAAU,QAAU,CAAA,CAC/F,CAEA,eAAeF,EAAWb,EAAQ,CAC1BA,EAAO,UAAYL,EAAa,IAAMK,EAAO,YAAc,IAC3DH,EAAS,KAAK,CACd,QAAS,4DACjB,CAAS,EACDS,EAAe,UAAU,OAAO,iBAAiB,EAEzD"}